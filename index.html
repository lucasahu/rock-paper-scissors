<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // required variables
        let playerSelection = prompt('Rock, Paper or Scissors?')
        const computerSelection = "placeholder";

        // computer choice randomizer function
        function getComputerChoice () {
            return Math.floor(Math.random() * 3);
        }
        
        // function that converts the prompt input into numerical values and
        // holds the rock paper scissors logic and determines a winner for each round played
        function playRound(computerSelection) {
            computerSelection = getComputerChoice();
          
          	const rockSelectionRegex = /rock/i;
            const paperSelectionRegex = /paper/i;
            const scissorsSelectionRegex = /scissors/i;
          	let playerSelectionConverted = '';
            const rock = 0;
            const paper = 1;
            const scissors = 2;
            if (rockSelectionRegex.test(playerSelection)) {
                playerSelectionConverted = rock;
            } else if (paperSelectionRegex.test(playerSelection)) {
                playerSelectionConverted = paper;
            } else {
                playerSelectionConverted = scissors;
            }

           //console.log(`player picks ${playerSelectionConverted} and computer picks ${computerSelection}`)

            if ((playerSelectionConverted + 1 ) % 3 == computerSelection) {
                return 'Computer wins'
            } else if (playerSelectionConverted == computerSelection) {
                return 'Its a draw'
            } else {
                return 'Player wins'
            }

        }
        
        // function that plays 5 rounds in a row and determines a winner after said 5 rounds
        function game () {
            let playerWins = 0;
            let computerWins = 0;
            let gamesPlayed = 0;

            let result1 = playRound();
            let result2 = playRound();
            let result3 = playRound();
            let result4 = playRound();
            let result5 = playRound();

            // determine the winner of game 1
            if (result1 == 'Computer wins') {
                computerWins++;
                gamesPlayed++;
              console.log('Computer wins game 1')
            } else if (result1 == 'Player wins') {
                playerWins++;
                gamesPlayed++;
              console.log('Player wins game 1')
            } else {
                gamesPlayed++;
              console.log('Its a draw game 1')
            }
            
            // determine the winner of game 2
            if (result2 == 'Computer wins') {
                computerWins++;
                gamesPlayed++;
              console.log('Computer wins game 2')
            } else if (result2 == 'Player wins') {
                playerWins++;
                gamesPlayed++;
              console.log('Player wins game 2')
            } else {
                gamesPlayed++;
              console.log('Its a draw game 2')
            }

            // determine the winner of game 3
            if (result3 == 'Computer wins') {
                computerWins++;
                gamesPlayed++;
              console.log('Computer wins game 3')
            } else if (result3 == 'Player wins') {
                playerWins++;
                gamesPlayed++;
              console.log('Player wins game 3')
            } else {
                gamesPlayed++;
              console.log('Its a draw game 3')
            }

            // determine the winner of game 4
            if (result4 == 'Computer wins') {
                computerWins++;
                gamesPlayed++;
              console.log('Computer wins game 4')
            } else if (result4 == 'Player wins') {
                playerWins++;
                gamesPlayed++;
              console.log('Player wins game 4')
            } else {
                gamesPlayed++;
              console.log('Its a draw game 4')
            }

            // determine the winner of game 5
            if (result5 == 'Computer wins') {
                computerWins++;
                gamesPlayed++;
              console.log('Computer wins game 5')
            } else if (result5 == 'Player wins') {
                playerWins++;
                gamesPlayed++;
              console.log('Player wins game 5')
            } else {
                gamesPlayed++;
              console.log('Its a draw game 5')
            }

            // determine the winner of the set of 5 games
            if (playerWins > computerWins) {
                return `Player wins! with a score of ${playerWins} to ${computerWins} after ${gamesPlayed} games played!` 
            } else if (computerWins > playerWins) {
                return `Computer wins! with a score of ${computerWins} to ${playerWins} after ${gamesPlayed} games played!`
            } else {
                return `Tie game! The score is ${playerWins} to ${computerWins} after ${gamesPlayed} games played!` 
            }
        }
        //call the game() function
        console.log(game())
    </script>
</body>
</html>